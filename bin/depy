#!/bin/bash

DIR=$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")

# Go through the parameters to find the first input file. provided. If there is a requirements.txt in the same directory, use that

for var in "$@"
do
    if [ -f "$var" ]; then
        req_dir=$(dirname "$var")

        if [ -f "${req_dir}/requirements.txt" ]; then
            export DEPY_REQS="${req_dir}/requirements.txt"
            export PYTHONPATH=$DIR/../libs:$PYTHONPATH
            exec python3 "$@"
        fi
    fi
done

exec python3 "$@"
